{"version":3,"file":"jsheap.js","sourceRoot":"","sources":["../src/jsheap.ts"],"names":[],"mappings":";;AAAA;IAEE,gBAAmB,GAAS;QAAT,QAAG,GAAH,GAAG,CAAM;QAC1B,kBAAkB;QAClB,IAAI,CAAC,GAAG,GAAG,GAAG,IAAI,WAAW,CAAC;QAE9B,oBAAoB;QACpB,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC;IACrB,CAAC;IAED,qBAAI,GAAJ,UAAK,IAAS;QACZ,IAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACvB,IAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;QACrB,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;QACpB,IAAI,CAAC,CAAC;QAEN,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChB,OAAO,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE;YACrD,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACjB,CAAC,GAAG,CAAC,CAAC;SACP;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAED,oBAAG,GAAH;QACE,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IACtB,CAAC;IAED,oBAAG,GAAH;QACE,IAAI,IAAI,CAAC,KAAK,EAAE;YAAE,MAAM,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC;QACnD,IAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACvB,IAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;QACrB,IAAI,CAAS,CAAC;QACd,IAAM,IAAI,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QACxB,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAC3B,IAAI,MAAM,IAAI,CAAC;YAAE,OAAO,IAAI,CAAC;QAE7B,CAAC,GAAG,CAAC,CAAC;QACN,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;QAEf,OAAO,CAAC,GAAG,CAAC,GAAG,MAAM,EAAE;YACrB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACd,IAAI,CAAC,GAAG,CAAC,GAAG,MAAM,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;gBAC/C,EAAE,CAAC,CAAC;aACL;YACD,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;gBAC1B,MAAM;aACP;YACD,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACjB,CAAC,GAAG,CAAC,CAAC;SACP;QAED,OAAO,IAAI,CAAC;IACd,CAAC;IAED,sBAAK,GAAL;QACE,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;IAC/B,CAAC;IACH,aAAC;AAAD,CAAC,AA1DD,IA0DC;AA1DY,wBAAM;AA4DnB,SAAS,WAAW,CAAC,CAAS,EAAE,CAAS;IACvC,OAAO,CAAC,GAAG,CAAC,CAAC;AACf,CAAC;AAED,SAAS,IAAI,CAAI,IAAS,EAAE,CAAS,EAAE,CAAS;IAC9C,IAAM,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;IACpB,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;IAClB,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AAChB,CAAC","sourcesContent":["export class jsheap {\n  heap: any[];\n  constructor(public cmp?: any) {\n    //Compare function\n    this.cmp = cmp || default_cmp;\n\n    // heap[0] is dummpy\n    this.heap = [null];\n  }\n\n  push(item: any) {\n    const heap = this.heap;\n    const cmp = this.cmp;\n    let i = heap.length;\n    let j;\n\n    heap.push(item);\n    while (i > 1 && cmp(heap[i], heap[(j = (i / 2) | 0)])) {\n      swap(heap, i, j);\n      i = j;\n    }\n    return this;\n  }\n\n  top() {\n    return this.heap[1];\n  }\n\n  pop() {\n    if (this.empty()) throw new Error(\"heap is empty\");\n    const heap = this.heap;\n    const cmp = this.cmp;\n    let i: number;\n    const item = heap.pop();\n    const length = heap.length;\n    if (length == 1) return this;\n\n    i = 1;\n    heap[1] = item;\n\n    while (i * 2 < length) {\n      let j = i * 2;\n      if (j + 1 < length && cmp(heap[j + 1], heap[j])) {\n        ++j;\n      }\n      if (!cmp(heap[j], heap[i])) {\n        break;\n      }\n      swap(heap, i, j);\n      i = j;\n    }\n\n    return this;\n  }\n\n  empty() {\n    return this.heap.length <= 1;\n  }\n}\n\nfunction default_cmp(a: number, b: number) {\n  return a < b;\n}\n\nfunction swap<T>(heap: T[], a: number, b: number) {\n  const tmp = heap[a];\n  heap[a] = heap[b];\n  heap[b] = tmp;\n}\n"]}